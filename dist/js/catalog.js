import noUiSlider from"/libs/nouislider.mjs";const $btnPagNext=document.querySelector(".btn-next"),$btnPagPrev=document.querySelector(".btn-prev"),$btnPagEnd=document.querySelector(".btn-end"),$catalogCart=document.querySelectorAll(".catalog__card");function start(){const e=document.documentElement.clientWidth;(e>=1320||e<=1024&&e>=980)&&renderCarts(8,$catalogCart),(e<=1320&&e>1024||e<=980)&&renderCarts(5,$catalogCart),$btnPagPrev.addEventListener("click",(()=>{$btnPagNext.classList.remove("active"),$btnPagEnd.classList.remove("active"),$btnPagPrev.classList.add("active"),e>=1320&&renderCarts(8,$catalogCart,0),e<=1320&&e>=1024&&renderCarts(5,$catalogCart,0)})),$btnPagNext.addEventListener("click",(()=>{$btnPagPrev.classList.remove("active"),$btnPagEnd.classList.remove("active"),$btnPagNext.classList.add("active"),e>=1320&&renderCarts(8,$catalogCart,8),e<=1320&&e>=1024&&renderCarts(5,$catalogCart,6)})),$btnPagEnd.addEventListener("click",(()=>{$btnPagPrev.classList.remove("active"),$btnPagNext.classList.remove("active"),$btnPagEnd.classList.add("active"),renderCarts(5,$catalogCart,6)}))}function renderCarts(e,t,r=0){for(let i=0;i<t.length;i++)t[i].classList.remove("hidden"),i>e&&t[i-r].classList.add("hidden")}start(),window.addEventListener("resize",start);const slider=document.getElementById("slider"),$inputs=document.querySelectorAll(".price"),$priceFrom=document.querySelector(".price__from"),$priceTo=document.querySelector(".price__to");noUiSlider.create(slider,{start:[5e3,15e4],connect:!0,range:{min:0,max:2e5}}),slider.noUiSlider.on("update",(function(e,t){$inputs[t].value=Math.trunc(e[t])})),$inputs.forEach((function(e,t){e.addEventListener("change",(function(){slider.noUiSlider.setHandle(t,this.value)}))}));const $regionSelect=document.getElementById("region"),choicesRegion=new Choices($regionSelect,{searchEnabled:!1,placeholder:!0,placeholderValue:null,itemSelectText:"",allowHTML:!1,classNames:{listDropdown:"region-dropdown"}}),$categorySelect=document.getElementById("category"),choicesCategory=new Choices($categorySelect,{searchEnabled:!1,placeholder:!0,placeholderValue:"Категория",itemSelectText:"",allowHTML:!1,classNames:{containerOuter:"choices choices-category",containerInner:"choices__inner choices__inner-category",item:"choices__item choices__item-category"}}),$formSearch=document.querySelector(".search");$formSearch.addEventListener("submit",(e=>{e.preventDefault()}));const $btnBurger=document.querySelector(".burger-btn"),$btnClose=document.querySelector(".menu-pages__close"),$menuBox=document.querySelector(".menu-pages"),$menu=document.querySelector(".menu-pages__list");$btnBurger.addEventListener("click",(()=>{$btnBurger.classList.toggle("open"),$menuBox.classList.toggle("active")})),$btnClose.addEventListener("click",(()=>{$btnBurger.classList.remove("open"),$menuBox.classList.remove("active")}));const spoilersArr=document.querySelectorAll("[data-spoilers]");if(spoilersArr.length>0){const e=Array.from(spoilersArr).filter((function(e,t,r){return e.dataset.spoilers.split(",")[0]}));if(e.length>0){const t=[];e.forEach((e=>{const r={},i=e.dataset.spoilers.split(",");r.value=i[0],r.type=i[1]?i[1].trim():"max",r.item=e,t.push(r)}));let r=t.map((function(e){return"("+e.type+"-width: "+e.value+"px),"+e.value+","+e.type}));r=r.filter((function(e,t,r){return r.indexOf(e)===t})),r.forEach((e=>{const r=e.split(","),i=r[1],n=r[2],c=window.matchMedia(r[0]),a=t.filter((function(e){if(e.value===i&&e.type===n)return!0}));c.addEventListener("change",(function(){initSpoiler(a,c)})),initSpoiler(a,c)}))}}function initSpoiler(e,t=!1){e.forEach((e=>{e=t?e.item:e,t.matches||!t?(e.classList.add("_init"),initSpoilersBody(e),e.addEventListener("click",setSpoilerAction)):(e.classList.remove("_init"),initSpoilersBody(e,!1))}))}function initSpoilersBody(e,t=!0){const r=e.querySelector("[data-spoiler]"),i=e.querySelector(".filter__item"),n=e.querySelector(".filter__body");r.addEventListener("click",(()=>{r.classList.contains("_active")||(r.classList.toggle("_active"),i.classList.toggle("_active"),n.classList.toggle("_active"))}))}function setSpoilerAction(e){const t=e.target;if(t.hasAttribute("[data-spoiler]")||t.closest("[data-spoiler]")){const r=t.hasAttribute("[data-spoiler]")?t:t.closest("[data-spoiler]"),i=r.closest("[data-spoilers]"),n=!!i.hasAttribute("[data-one-spoiler]");i.querySelectorAll("_slide").length||(n&&!r.classList.contains("_active")&&hideSpoilerBody(i),r.classList.toggle("_active")),e.preventDefault()}}function hideSpoilerBody(e){const t=e.querySelector("[data-spoiler]._active");t&&t.classList.remove("_active")}